!function(n){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.image_select=redux.field_objects.image_select||{},redux.field_objects.image_select.init=function(e){e||(e=n(document).find(".redux-group-tab:visible").find(".redux-container-image_select:visible")),n(e).each(function(){var l=n(this),e=l;l.hasClass("redux-field-container")||(e=l.parents(".redux-field-container:first")),e.is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),l.find(".redux-image-select label img, .redux-image-select label .tiles").click(function(e){l.parents(".redux-container").data("opt-name");var t=n(this).closest("label").attr("for");if(n(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!1),n(this).closest("label").find('input[type="radio"]').prop("checked"),n(this).closest("label").hasClass("redux-image-select-preset-"+t)){e.preventDefault();var i=n(this).closest("label").find("input"),s=i.data("presets"),a=i.data("merge");if(null!=a&&("string"===n.type(a)&&(a=a.split("|")),n.each(s,function(e,t){!0!==a&&-1===n.inArray(e,a)||"object"!==n.type(redux.optName.options[e])||(s[e]=n.extend(redux.optName.options[e],s[e]))})),null!=i)if(confirm(redux.optName.args.preset_confirm)){l.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0),window.onbeforeunload=null;var r=n("#import-code-value");0===r.length?n(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.optName.args.opt_name+'[import_code]">'+JSON.stringify(s)+"</textarea>"):r.val(JSON.stringify(s)),0!==n("#publishing-action #publish").length?n("#publish").click():n("#redux-import").click()}return!1}l.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0).trigger("change"),redux_change(n(this).closest("label").find('input[type="radio"]'))}),l.find(".tiles").qtip({content:{text:function(e,t){return"<img src='"+n(this).attr("rel")+"' style='max-width:150px;' alt='' />"}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))})}}(jQuery);