
(function(a){redux.field_objects=redux.field_objects||{};redux.field_objects.css_layout=redux.field_objects.css_layout||{};redux.field_objects.css_layout.init=function(b){if(!b){b=a(document).find(".redux-group-tab:visible").find(".redux-container-css_layout:visible")}a(b).each(function(){var d=a(this);var c=d;if(!d.hasClass("redux-field-container")){c=d.parents(".redux-field-container:first")}if(c.is(":hidden")){return}if(c.hasClass("redux-field-init")){c.removeClass("redux-field-init")}else{return}redux.field_objects.css_layout.modInit(d)})};redux.field_objects.css_layout.modInit=function(c){var e=Boolean(c.find(".redux-css-layout-container").data("dev-mode"));if(e==true){var h=c.find(".redux-css-layout-container").data("version");var d=a("div.redux-timer").html();if(d!==undefined){var i=d.indexOf("CSS Layout");if(i===-1){a("div.redux-timer").html(d+"<br/>CSS Layout extension v."+h)}}}var f={triggerChange:true,allowClear:false};var j=c.find(".redux-container-css_layout").find(".select2_params");if(j.size()>0){var g=j.val();g=JSON.parse(g);f=a.extend({},f,g)}c.find(".redux-style-css-layout-border").select2(f);var b=c.attr("data-id");c.find("#"+b+" .redux-color-css-layout-border").wpColorPicker({change:function(l,m){redux_change(a(this));var k=m.color.toString();c.find("#"+b).find(".redux-css-layout-border").css({"border-color":k})}});c.find(".redux-style-css-layout-border").on("change",function(m){redux_change(c.find(".redux-css-layout-container"));var k=a(this).val();var l=c.attr("data-id");c.find("#"+l).find(".redux-css-layout-border").css({"border-style":k})});c.find(".css-layout-input").on("change",function(p){var o=a(this).val();var l=redux.field_objects.css_layout.getUnit(o,c);var n=(l!=="")?l:redux.field_objects.css_layout.defUnitVal(a(this),c);o=o.replace(/[^\d.-]/g,"");if(o!==""&&a.isNumeric(o)){redux_change(c.find(".redux-css-layout-container"));a(this).val("");a(this).val(o+n)}else{a(this).val("")}redux.field_objects.css_layout.updateShorthand(a(this),c);if(a(this).hasClass("redux-css-layout-input-radius")){var k=a(this).val();var m=c.attr("data-id");c.find("#"+m).find(".redux-css-layout-border").css({"border-radius":k})}})};redux.field_objects.css_layout.updateShorthand=function(b,d){var c=["margin","border","padding"];var g=["top","right","bottom","left"];var f=[];var e=d.attr("data-id");a.each(c,function(h,j){if(b.hasClass("redux-css-"+j)){a.each(g,function(k,l){f[k]=d.find("#"+e).find(".redux-css-"+j+"-"+l).val();f[k]=(f[k]==="")?"0":f[k]});var i=f[0]+" "+f[1]+" "+f[2]+" "+f[3];d.find("#"+e).find(".redux-css-"+j+"-shorthand").val(i)}})};redux.field_objects.css_layout.getUnit=function(f,e){var b="";var d=f.toLowerCase();var c=a("#"+e.attr("data-id")).data("units");c=decodeURIComponent(c);c=a.parseJSON(c);a.each(c,function(h,i){var g=d.indexOf(i);if(g!==-1){b=i;return false}});return b};redux.field_objects.css_layout.defUnitVal=function(b,d){var e=d.attr("data-id");var c;if(d.find(b).hasClass("redux-css-margin")){c=d.find("#"+e).data("margin-unit")}if(d.find(b).hasClass("redux-css-border")){c=d.find("#"+e).data("border-unit")}if(d.find(b).hasClass("redux-css-padding")){c=d.find("#"+e).data("padding-unit")}if(d.find(b).hasClass("redux-css-layout-input-radius")){c=d.find("#"+e).data("radius-unit")}return c}})(jQuery);